(function(b,c){b.autoGrowTextArea=function(e,g){var i={minHeight:false,maxHeight:false},h=this,k=b(e),f;h.settings={};h.enable=function(){k.on({"focus.autoGrowTextArea":d,"blur.autoGrowTextArea":j}).css({overflow:"hidden"});h.$origin.val(k.val());h.grow();};h.disable=function(){k.off(".autoGrowTextArea").css({overflow:"visible"});clearInterval(h.timerId);};h.reinit=function(){var m,l,n;h.settings=b.extend({},i,g);h.offset=0;if(h.$origin){h.$origin.remove();h.disable();}k.css({overflow:"hidden",resize:"none","white-space":"pre"});h.$origin=k.clone().val("").appendTo(c.body);f=h.$origin.get(0);l=h.$origin.height();f.scrollHeight;m=(f.scrollHeight!==l);if(m){n=h.$origin.innerHeight();h.offset=n-l;}h.initialHeight=h.settings.minHeight?h.settings.minHeight:l;h.$origin.hide();h.enable();};h.grow=function(){var n,m,l;n=k.attr("value");if(n===h.prev){return;}h.prev=n;h.$origin.attr("value",n).show();f.scrollHeight;m=f.scrollHeight;l=m-h.offset;h.$origin.hide();if(h.settings.maxHeight){if(h.settings.maxHeight<l){l=h.settings.maxHeight;k.css({overflow:"visible"});}else{k.css({overflow:"hidden"});}}k.height(l>h.initialHeight?l:h.initialHeight);};var d=function(){h.prev=k.val();h.timerId=setInterval(h.grow,30);};var j=function(){clearInterval(h.timerId);};h.destory=function(){k.css({overflow:"",resize:"","white-space":""});h.disable();h.$origin.remove();k.removeData("autoGrowTextArea");};h.reinit();};var a=function(e,d){return this.each(function(){if(undefined==b(this).data("autoGrowTextArea")){d=e;var g=new b.autoGrowTextArea(this,d);b(this).data("autoGrowTextArea",g);}else{if(e!=undefined){var f=b(this).data("autoGrowTextArea");if(f.hasOwnProperty(e)){f[e](d);}else{b.error("autoGrowTextArea has not method: "+e);}}else{b.error("autoGrowTextArea has already been initialized");}}});};b.fn.autoGrowTextarea=a;b.fn.autoGrowTextArea=a;if(!("autoGrow" in b.fn)){b.fn.autoGrow=a;}}(jQuery,document));